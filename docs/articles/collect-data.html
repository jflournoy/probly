<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Collect and Clean SPLT Data â€¢ probly</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">probly</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/collect-data.html">Collect and Clean SPLT Data</a>
    </li>
    <li>
      <a href="../articles/descriptive-statistics.html">Descriptive Statistics for SPLT data</a>
    </li>
    <li>
      <a href="../articles/test-simple-3l-mv-model.html">Test Simple 3-level Multivariate Normal Model</a>
    </li>
    <li>
      <a href="../articles/test-simulated-data.html">Test Simulated Data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Collect and Clean SPLT Data</h1>
                        <h4 class="author">John Flournoy</h4>
            
            <h4 class="date">2018-03-22</h4>
          </div>

    
    
<div class="contents">
<p>Data from the Social Probabilistic Learning Task was collected from 5 different samples: Community adolescents, foster-care involved adolescents, at-risk adolescents, University of Oregon human subject pool (UOHSP) particupants who visitied the lab, and UOHSP participants who completed the study online. Data is excluded for any participant who did failed showed a pattern of inattentive responding on the questionnaires and who generated response times that are inconsistent with attentive responding during the task.</p>
<p>List of unexcused no-show IDs (these will be excluded):</p>
<ul>
<li>38547</li>
<li>44123</li>
<li>43237</li>
<li>42283</li>
</ul>
<p>List of IDs with errors in output files (incomplete file save; will be included but sensitivity to inclusion will be assessed):</p>
<ul>
<li>43993</li>
<li>43640</li>
<li>43329</li>
<li>43303</li>
<li>40179</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw">library</span>(tidyr)
<span class="kw">library</span>(readr)
<span class="kw">library</span>(stringr)

root_dir &lt;-<span class="st"> '~/code_new/probly/extdata/'</span> <span class="co"># This would be '/Volumes/' if you've mounted locally</span>
raw_data_dir &lt;-<span class="st"> </span><span class="kw">file.path</span>(root_dir, <span class="st">'raw/'</span>)
processed_data_dir &lt;-<span class="st"> </span><span class="kw">file.path</span>(root_dir, <span class="st">'processed/'</span>)
conditions &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'HungryThirsty'</span>, <span class="st">'DatingLooking'</span>, <span class="st">'PopularUnpopular'</span>)
metacog_condition &lt;-<span class="st"> 'Confidence'</span>
file_match_pattern &lt;-<span class="st"> 'split.*csv'</span>

col_spec &lt;-<span class="st"> </span>readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/cols">cols</a></span>(
    <span class="dt">.default =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_character</a></span>(),
    <span class="dt">rt =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">key_press =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">trial_index =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">time_elapsed =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">block_duration =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">timing_post_trial =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">correct_response =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">possible_responses =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_number">col_number</a></span>(),
    <span class="dt">stim_duration =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">feedback_duration =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">optimal_response =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">stimindex =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">reward_possible =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">stim_chosen =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">qnum =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">page_num =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">trial_num =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">score_response =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>(),
    <span class="dt">response_range =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_number">col_number</a></span>(),
    <span class="dt">times_viewed =</span> readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/parse_atomic">col_integer</a></span>()
)

files &lt;-<span class="st"> </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">data_frame</a></span>(<span class="dt">file =</span> <span class="kw">dir</span>(<span class="dt">path =</span> raw_data_dir, 
                                      <span class="dt">pattern =</span> file_match_pattern,
                                      <span class="dt">recursive =</span> T)) 

<span class="kw">message</span>(<span class="kw">paste0</span>(<span class="st">'Files: '</span>, <span class="kw">length</span>(<span class="kw">unique</span>(files$file))))
<span class="co">#&gt; Files: 318</span>

parsed_filenames &lt;-<span class="st"> </span>tidyr::<span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/extract">extract</a></span>(
    files, 
    file, <span class="kw">c</span>(<span class="st">'filename'</span>, <span class="st">'dir'</span>, <span class="st">'id'</span>, <span class="st">'timestamp'</span>), 
    <span class="st">'(([</span><span class="ch">\\</span><span class="st">w]+/)*split-([0-9]+|bad_pid)[-_]([0-9]+)</span><span class="ch">\\</span><span class="st">.csv)'</span>)

splt_data_and_problems &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/do.html">do</a></span>(
    dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(
        parsed_filenames,
        filename, dir, id, timestamp),
    {
        adf =<span class="st"> </span>readr::<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/read_delim">read_csv</a></span>(<span class="kw">file.path</span>(raw_data_dir, .$filename[[<span class="dv">1</span>]]), <span class="dt">col_types =</span> col_spec)
        prob_adf &lt;-<span class="st"> </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise_all.html">mutate_all</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/problems">problems</a></span>(adf), <span class="kw"><a href="http://dplyr.tidyverse.org/reference/funs.html">funs</a></span>(as.character))
        <span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">data_frame</a></span>(<span class="dt">data =</span> <span class="kw">list</span>(adf), <span class="dt">problems =</span> <span class="kw">list</span>(prob_adf))
    })
<span class="co">#&gt; Warning in rbind(names(probs), probs_f): number of columns of result is not</span>
<span class="co">#&gt; a multiple of vector length (arg 1)</span>
<span class="co">#&gt; Warning: 3 parsing failures.</span>
<span class="co">#&gt; row # A tibble: 3 x 5 col     row col   expected                     actual     file                 expected   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                        &lt;chr&gt;      &lt;chr&gt;                actual 1   261 qnum  closing quote at end of file ""         '~/code_new/probly/â€¦ file 2   261 qnum  an integer                   %          '~/code_new/probly/â€¦ row 3   261 &lt;NA&gt;  41 columns                   31 columns '~/code_new/probly/â€¦</span>
<span class="co">#&gt; Warning in rbind(names(probs), probs_f): number of columns of result is not</span>
<span class="co">#&gt; a multiple of vector length (arg 2)</span>
<span class="co">#&gt; Warning: 1 parsing failure.</span>
<span class="co">#&gt; row # A tibble: 1 x 5 col     row col   expected   actual    file                                    expected   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;                                   actual 1   201 &lt;NA&gt;  41 columns 8 columns '~/code_new/probly/extdata//raw//yads_â€¦ file # A tibble: 1 x 5</span>
<span class="co">#&gt; Warning: 2 parsing failures.</span>
<span class="co">#&gt; row # A tibble: 2 x 5 col     row col   expected                     actual     file                 expected   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                        &lt;chr&gt;      &lt;chr&gt;                actual 1   160 image closing quote at end of file ""         '~/code_new/probly/â€¦ file 2   160 &lt;NA&gt;  41 columns                   21 columns '~/code_new/probly/â€¦</span>
<span class="co">#&gt; Warning in rbind(names(probs), probs_f): number of columns of result is not</span>
<span class="co">#&gt; a multiple of vector length (arg 2)</span>
<span class="co">#&gt; Warning: 1 parsing failure.</span>
<span class="co">#&gt; row # A tibble: 1 x 5 col     row col   expected   actual     file                                   expected   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;                                  actual 1   160 &lt;NA&gt;  41 columns 38 columns '~/code_new/probly/extdata//raw//yadsâ€¦ file # A tibble: 1 x 5</span>
<span class="co">#&gt; Warning: 2 parsing failures.</span>
<span class="co">#&gt; row # A tibble: 2 x 5 col     row col          expected   actual     file                            expected   &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;                           actual 1   313 times_viewed an integer %          '~/code_new/probly/extdata//raâ€¦ file 2   313 &lt;NA&gt;         41 columns 38 columns '~/code_new/probly/extdata//raâ€¦</span>

splt_data_and_problems$.id &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="dv">1</span>:<span class="kw">dim</span>(splt_data_and_problems)[<span class="dv">1</span>])
<span class="kw">names</span>(splt_data_and_problems$data) &lt;-<span class="st"> </span>splt_data_and_problems$.id
<span class="kw">names</span>(splt_data_and_problems$problems) &lt;-<span class="st"> </span>splt_data_and_problems$.id
splt_data &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(
    <span class="kw"><a href="http://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(splt_data_and_problems$data, <span class="dt">.id =</span> <span class="st">'.id'</span>),
    splt_data_and_problems[,<span class="kw">c</span>(<span class="st">'.id'</span>, <span class="st">'filename'</span>, <span class="st">'dir'</span>, <span class="st">'id'</span>, <span class="st">'timestamp'</span>)])
<span class="co">#&gt; Joining, by = ".id"</span>
splt_problems &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(
    <span class="kw"><a href="http://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(splt_data_and_problems$problems, <span class="dt">.id =</span> <span class="st">'.id'</span>),
    splt_data_and_problems[,<span class="kw">c</span>(<span class="st">'.id'</span>, <span class="st">'filename'</span>, <span class="st">'dir'</span>, <span class="st">'id'</span>, <span class="st">'timestamp'</span>)])
<span class="co">#&gt; Joining, by = ".id"</span>

splt_crunched &lt;-<span class="st"> </span>splt_data %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>((trial_id ==<span class="st"> 'stim'</span> &amp;<span class="st"> </span>(key_press&gt;<span class="dv">0</span> |<span class="st"> </span>key_press==-<span class="dv">1</span>)) |<span class="st"> </span>(trial_id ==<span class="st"> 'metacog'</span>)) %&gt;%
<span class="st">    </span>tidyr::<span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/extract">extract</a></span>(image, 
                   <span class="kw">c</span>(<span class="st">'stim_image'</span>, <span class="st">'sex'</span>), 
                   <span class="st">'.*/(([fma])_f42887_e_[0-9]{3}</span><span class="ch">\\</span><span class="st">.png)'</span>) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">correcttrue =</span> <span class="kw">ifelse</span>(key_press ==<span class="st"> </span>-<span class="dv">1</span>, <span class="ot">NA</span>, <span class="kw">as.numeric</span>(correct ==<span class="st"> 'true'</span>)),
                  <span class="dt">outcome =</span> <span class="kw">ifelse</span>(feedback, reward_possible, <span class="dv">0</span>),
                  <span class="dt">pressed_r =</span> <span class="kw">c</span>(<span class="st">`</span><span class="dt">37</span><span class="st">`</span> =<span class="st"> </span><span class="dv">0</span>,<span class="st">`</span><span class="dt">39</span><span class="st">`</span> =<span class="st"> </span><span class="dv">1</span>)[<span class="kw">as.character</span>(key_press)]) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/rowwise.html">rowwise</a></span>() %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">proportion =</span> condition, 
                  <span class="dt">condition =</span> <span class="kw">paste</span>(<span class="kw">sort</span>(<span class="kw">unlist</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_split">str_split</a></span>(context, <span class="st">'_'</span>))), <span class="dt">collapse =</span> <span class="st">''</span>), 
                  <span class="dt">condition =</span> <span class="kw">ifelse</span>(trial_id ==<span class="st"> 'metacog'</span>, <span class="st">'Confidence'</span>, condition),
                  <span class="dt">correcttrue =</span> <span class="kw">ifelse</span>(trial_id ==<span class="st"> 'metacog'</span>, 
                                     <span class="kw">as.numeric</span>(score_response), correcttrue)) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(condition %in%<span class="st"> </span><span class="kw">c</span>(conditions, metacog_condition)) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(filename, id, condition) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">condition_trial_index =</span> <span class="dv">1</span>:<span class="kw"><a href="http://dplyr.tidyverse.org/reference/n.html">n</a></span>(),
                  <span class="dt">block =</span> ((condition_trial_index<span class="dv">-1</span>) %/%<span class="st"> </span><span class="dv">16</span>) +<span class="st"> </span><span class="dv">1</span>,
                  <span class="dt">dir =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(dir), <span class="st">'/'</span>, dir),
                  <span class="dt">sample =</span> <span class="kw">ifelse</span>(dir %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">'yads/'</span>, <span class="st">'yads_online/'</span>),
                                  <span class="kw">sub</span>(<span class="st">'/'</span>, <span class="st">''</span>, dir),
                                  <span class="kw">c</span>(<span class="st">'TDS2'</span>, <span class="st">'TDS2'</span>, <span class="st">'TDS1'</span>, <span class="st">'TDS3'</span>)[<span class="kw">floor</span>(<span class="kw">as.numeric</span>(id)/<span class="dv">100</span>)])) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(id, dir, filename, sample,
                  correcttrue, pressed_r, outcome, 
                  condition, condition_trial_index, 
                  sex, stim_image, 
                  trial_index, block, proportion, 
                  rt, time_elapsed)
<span class="co">#&gt; Warning: Grouping rowwise data frame strips rowwise nature</span>
<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co">#&gt; Warning in ifelse(dir %in% c("yads/", "yads_online/"), sub("/", "", dir), :</span>
<span class="co">#&gt; NAs introduced by coercion</span>

metacog_clean &lt;-<span class="st"> </span>splt_crunched %&gt;%<span class="st"> </span>
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(-sex, -stim_image) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(condition ==<span class="st"> </span>metacog_condition,
                  !<span class="kw">is.na</span>(correcttrue)) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">block=</span>(condition_trial_index<span class="dv">+1</span>)/<span class="dv">2</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span>tidyr::<span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/spread">spread</a></span>(condition, correcttrue) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">confidence=</span>Confidence) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(sample, id, block, confidence)

splt_clean &lt;-<span class="st"> </span>splt_crunched %&gt;%<span class="st"> </span>
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(condition !=<span class="st"> </span>metacog_condition) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">scaled_index =</span> <span class="kw">scale</span>(condition_trial_index),
                  <span class="dt">condition =</span> <span class="kw">factor</span>(condition, 
                                     <span class="dt">levels =</span> conditions, 
                                     <span class="dt">labels =</span> <span class="kw">abbreviate</span>(conditions))) %&gt;%
<span class="st">    </span>dplyr::<span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(sample, id, trial_index)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Write the data</span>
splt &lt;-<span class="st"> </span>splt_clean
splt_confidence &lt;-<span class="st"> </span>metacog_clean
devtools::<span class="kw">use_data</span>(splt, splt_confidence)</code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Flournoy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
